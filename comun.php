<?php
// Ftp accounts.
$domains = array(

	/** JSALAZAR.COM.MX */
	array('equirentas.com.mx', 'equirent', '%vs{O[q#rI{w', '', 1),
	array('maquinaria-monterrey.com.mx', 'maqmonterrey', '&*dLQ$UTwkxu', '', 2),
	array('maquinaria-guadalupe.com.mx', 'maqguadalupe', 'B?kl5243}th3', '', 3),
	array('maquinaria-puebla.com.mx', 'maqpuebla', '8By=,t%#hz.a', '', 10),
	array('maquinaria-toluca.com.mx', 'maqtoluca', 'NhE_JPS&u=B}', '', 11),
	array('maquinaria-guadalajara.com.mx', 'mguadalajara', '#Jn;8wW9p_RC', '', 16),
	array('maquinaria-queretaro.com.mx', 'maqqueretaro', 'Znh((o2lLy?s', '', 20),
	array('maquinaria-merida.com.mx', 'maqmerida', 't.Tt4vpI6.~M', '', 21),
	array('maquinaria-acapulco.com.mx', 'maqacapulco', 'KKD6{1)eP,Vi', '', 24),
	array('maquinaria-morelia.com.mx', 'maqmorelia', '~N)w}]HNUW.7', '', 28),
	array('serviciojake.com.mx', 'serviciojake', 'BEMM@+Fin;ET', '', 30),
	array('maquinaria-villahermosa.com.mx', 'maqvillahermosa', '~@-cTf(GhT8)', '', 31),
	array('maquinaria-cancun.com.mx', 'maqcancun', '?rN+q[(**R^T', '', 34),
	array('maquinaria-loscabos.com.mx', 'loscabos', ']v*{uCv{MY3nL#Kg', '', 51),
	array('maquinaria-cdmx.com.mx', 'maqcdmx', ']sXe6u8_!Pe8', '', 53),
	array('maquinaria-oaxaca.com.mx', 'maqoaxaca', '{wOfl@vFS=5r', '', 54),
	array('maquinaria-leon.com.mx', 'maqleon', 'HhGlS{hf=G0R', '', 55),
	array('maquinaria-tepic.com.mx', 'maqtepic', '#4C@A%ylhWx=', '', 59),
	array('maquinaria-slp.com.mx', 'maqslp', '#4C@A%ylhWx=', '', 62),
	array('maquinaria-klaryco.com.mx', 'klaryco', '#4C@A%ylhWx=', '', 63),
	array('maquinaria-mg.com.mx', 'maqmg', '#4C@A%ylhWx=', '', 64),
	array('maquinaria-cr.com.mx', 'maqcr', '#4C@A%ylhWx=', '', 65),
	array('mopa-maquinaria.com.mx', 'mopa', '#4C@A%ylhWx=', '', 66),
	array('alfa-maquinaria.mx', 'alfamaq', '#4C@A%ylhWx=', '', 69),
	array('maquinaria-tijuana.com.mx', 'maqtijuana', '#4C@A%ylhWx=', '', 70),

	/** JIS01.COM.Mx */
	array('klaryco-compresores.com.mx', 'klarycompresores', '837[Oe}a@R8~', '', 92),
	array('maquinaria-aguascalientes.com.mx', 'pmaguascalientes', '837[Oe}a@R8~', '', 78),
	array('maquinaria-cd-juarez.com.mx', 'pmcdjuarez', '837[Oe}a@R8~', '', 74),
	array('maquinaria-celaya.com.mx', 'pmcelaya', '837[Oe}a@R8~', '', 89),
	array('maquinaria-chihuahua.com.mx', 'pmchihuahua', '837[Oe}a@R8~', '', 77),
	array('maquinaria-cuernavaca.com.mx', 'pmcuernavaca', '837[Oe}a@R8~', '', 90),
	array('maquinaria-culiacan.com.mx', 'pmculiacan', '837[Oe}a@R8~', '', 80),
	array('maquinaria-durango.com.mx', 'pmdurango', '837[Oe}a@R8~', '', 83),
	array('maquinaria-ecatepec.com.mx', 'pmecatepec', '837[Oe}a@R8~', '', 73),
	array('maquinaria-ensenada.com.mx', 'pmensenada', '837[Oe}a@R8~', '', 91),
	array('maquinaria-irapuato.com.mx', 'pmirapuato', '837[Oe}a@R8~', '', 88),
	array('maquinaria-matamoros.com.mx', 'pmmatamoros', '837[Oe}a@R8~', '', 85),
	//array('maquinaria-mazatlan.com.mx', 'pmmazatlan', '837[Oe}a@R8~', '', 87),
	array('maquinaria-mexicali.com.mx', 'pmmexicali', '837[Oe}a@R8~', '', 79),
	array('maquinaria-reynosa.com.mx', 'pmreynosa', '837[Oe}a@R8~', '', 75),
	array('maquinaria-saltillo.com.mx', 'pmsaltillo', '837[Oe}a@R8~', '', 84),
	array('maquinaria-torreon.com.mx', 'pmtorreon', '837[Oe}a@R8~', '', 81),
	array('maquinaria-tuxtla.com.mx', 'pmtuxtla', '837[Oe}a@R8~', '', 82),
	array('maquinaria-xalapa.com.mx', 'pmxalapa', '837[Oe}a@R8~', '', 86),
	array('maquinaria-zapopan.com.mx', 'pmzapopan', '837[Oe}a@R8~', '', 72),
	array('maquinaria-hermosillo.com.mx', 'pmhermosillo', '837[Oe}a@R8~', '', 76),

	/** JIS01.COM.MX MOTACARGAS, PLATAFORMAS, RETROEXCAVADORAS, PLUZ */
	array('montacargas-cdmx.com.mx', 'montacargascdmx', 'yK39px1ifD&f', 93),
	array('montacargas-en-monterrey.com.mx', 'montmonterrey', 'yK39px1ifD&f', 94),
	array('montacargas-guadalajara.com.mx', 'montguadalajara', 'yK39px1ifD&f', 95),
	array('montacargas-leon-gto.com.mx', 'montgto', 'yK39px1ifD&f', 96),
	array('montacargas-puebla.com.mx', 'montpuebla', 'yK39px1ifD&f', 97),
	array('montacargas-tijuana.com.mx', 'monttijuana', 'yK39px1ifD&f', 98),
	array('plataformas-elevadoras-cdmx.com.mx', 'platcdmx', 'yK39px1ifD&f', 99),
	array('plataformas-elevadoras-guadalajara.com.mx', 'platguadalajara', 'yK39px1ifD&f', 100),
	array('plataformas-elevadoras-leon-gto.com.mx', 'platgto', 'yK39px1ifD&f', 101),
	array('plataformas-elevadoras-monterrey.com.mx', 'platmonterrey', 'yK39px1ifD&f', 102),
	array('plataformas-elevadoras-puebla.com.mx', 'platpuebla', 'yK39px1ifD&f', 103),
	array('plataformas-elevadoras-tijuana.com.mx', 'plattijuana', 'yK39px1ifD&f', 104),
	array('retroexcavadoras-cdmx.com.mx', 'retrcdmx', 'yK39px1ifD&f', 105),
	array('retroexcavadoras-guadalajara.com.mx', 'retrguadalajara', 'yK39px1ifD&f', 106),
	array('retroexcavadoras-leon-gto.com.mx', 'retrgto', 'yK39px1ifD&f', 107),
	array('retroexcavadoras-monterrey.com.mx', 'retrmonterrey', 'yK39px1ifD&f', 108),
	array('retroexcavadoras-puebla.com.mx', 'retrpuebla', 'yK39px1ifD&f', 109),
	array('retroexcavadoras-tijuana.com.mx', 'retrtijuana', 'yK39px1ifD&f', 110),

	array('plantasdeluz-guadalajara.com.mx', 'pluzguadalajara', 'yK39px1ifD&f', 112),
	array('plantasdeluz-leonguanajuato.com.mx', 'pluzlegon', 'yK39px1ifD&f', 113),
	array('plantasdeluz-monterrey.com.mx', 'pluzmonterrey', 'yK39px1ifD&f', 114),
	array('plantasdeluz-tijuana.com.mx', 'pluztijuana', 'yK39px1ifD&f', 116),

	array('plantasdeluz-oaxaca.com.mx', 'pluzoaxaca', 'yK39px1ifD&f', 112),
	array('plantasdeluz-veracruz.com.mx', 'pluzveracruz', 'yK39px1ifD&f', 113),
	array('plantasdeluz-queretaro.com.mx', 'pluzqueretaro', 'yK39px1ifD&f', 114),
	array('maquinaria-vallarta.com.mx', 'maqvallarta', 'yK39px1ifD&f', 116),

);







$sin_errores = true;
/* mover directorios completos, recursivamente */
function ftp_putAll($conn_id, $src_dir, $dst_dir)
{

	$d = dir($src_dir);
	while ($file = $d->read()) { // do this for each file in the directory
		if ($file != "." && $file != "..") { // to prevent an infinite loop
			if (is_dir($src_dir . "/" . $file)) { // do the following if it is a directory
				if (!@ftp_chdir($conn_id, $dst_dir . "/" . $file)) {
					$status = ftp_mkdir($conn_id, $dst_dir . "/" . $file); // create directories that do not yet exist
					if ($status == false)
						$sin_errores = false;
				}
				ftp_putAll($conn_id, $src_dir . "/" . $file, $dst_dir . "/" . $file); // recursive part
			} else {
				$upload = ftp_put($conn_id, $dst_dir . "/" . $file, $src_dir . "/" . $file, FTP_BINARY); // put the files
				if (!$upload)
					$sin_errores = false;
			}
		}
	}
	$d->close();
}

// Descargar directorio
// ftp_sync - Copy directory and file structure
//ya no jala
function ftp_sync($dir, $conn_id)
{
	if ($dir !== '.') {
		if (ftp_chdir($conn_id, $dir) === FALSE) {
			echo 'Change dir failed: ' . $dir . PHP_EOL;
			return;
		}
		if (!(is_dir($dir))) {
			mkdir($dir);
		}
		chdir($dir);
	}
	$contents = ftp_nlist($conn_id, '.');
	foreach ($contents as $file) {
		if ($file == '.' || $file == '..') {
			continue;
		}
		if (@ftp_chdir($conn_id, $file)) {
			ftp_chdir($conn_id, "..");
			ftp_sync($file, $conn_id);
		} else {
			ftp_get($conn_id, $file, $file, FTP_BINARY);
		}
	}
	ftp_chdir($conn_id, '..');
	chdir('..');
}

